<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="home.css">
    
</head>
<!-- <script>
  let currentConfig = [];

  async function fetchConfig() {
    try {
      const response = await fetch('http://localhost:8080/poll');
      if (!response.ok) throw new Error('Failed to fetch config');

      currentConfig = await response.json();
      applyFeatureFlags();
    } catch (error) {
      console.error('Error fetching feature flags:', error);
    }
  }

  function applyFeatureFlags() {
    const title = document.getElementById('main-title');

    const isRedOn = currentConfig.some(f => f.name === 'Red-title');
    const isGreenOn = currentConfig.some(f => f.name === 'green-title');

    if (isGreenOn) {
      title.style.color = 'green'; // green takes priority if both are on
    } else if (isRedOn) {
      title.style.color = 'red';
    } else {
      title.style.color = 'green'; // default
    }
  }

  // Fetch and apply feature flags on page load
  fetchConfig();
</script> -->
<body>
    <nav class="nav-bar">
        <p class="nav-home">Home</p>
        <p class="nav-accountone">Find a Store</p>
        <p class="nav-accounttwo">|</p>
        <p class="nav-accounttwo">Help</p>
        <p class="nav-accounttwo">|</p>
        <p class="nav-accounttwo">Sign In</p>
    </nav>
    <div class="nav-mid">
        <img class="nav-logo" src="swooshblk.png">
        <h2 class="nav-slogan" id="main-title"> Just Do It.</h2>
        <form action="#">
            <input type="text" placeholder="Search" name="search" class="search-bar">
        </form>
    </div>
    <div class="post-header">
        <p class="post-title">Final Internship Presentation</p>
        <p class="post-titletwo">Nike - 2025</p>
    </div>
    
    <img src="sinnerimg.png" class="headerimg">
    <div class="nav-final">
        <p class="final-title">A Project On</p>
        <p class="final-titletwo"><b>Feature Flag Framework</b></p>
    </div>
    <div class="nike-photos">
        <img src="skateboard.jpg" class="skateboard">
        <img src="surf.png" class="surf">
        <img src="bowshoes.png" class="bowshoes">
        
    </div>


     <div class="nav-final">
        <p class="exp-titletwo">Our Experience</p>
        <p class="exp-title"><b>Summer Interns </b></p>

    </div>

    <div class="my-photosone">
        <img src="one.jpg" class="p-one">
        <img src="two.jpg" class="p-one">
        <img src="six.jpg" class="p-one">
    </div>
    <div class="my-photostwo">
        <img src="four.jpg" class="p-one">
        <img src="five.jpg" class="p-one">
        <img src="one.jpg" class="p-one">
    </div>

    
</body>
<script>
    // Function to fetch and apply feature flags
    async function fetchAndApplyFeatureFlags() {
      let currentConfig = [];
      try {
        // Updated the fetch URL to use port 8080 as per your backend
        const response = await fetch('http://localhost:8080/poll');
        if (!response.ok) {
          // If response is not OK, throw an error
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        currentConfig = await response.json();
        console.log('Fetched feature flags:', currentConfig); // Log for debugging

        const title = document.getElementById('main-title');
        if (title) { // Ensure the element exists
          const isRedOn = currentConfig.some(f => f.name === 'Red-title' && f.status === 'Active');
          title.style.color = isRedOn ? 'red' : 'black';
        }
      } catch (error) {
        console.error('Error fetching feature flags:', error);
      }
    }

    // Call the function once when the DOM is fully loaded
    window.addEventListener('DOMContentLoaded', fetchAndApplyFeatureFlags);

    // Set up short polling: call the function every 5 seconds (5000 milliseconds)
    // You can adjust the interval as needed.
    setInterval(fetchAndApplyFeatureFlags, 5000); 
  </script>
</html>
